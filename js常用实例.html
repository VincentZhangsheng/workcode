<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>js常用实例</title>
</head>

<body>
    <script>
        let ecDo = {
            /*一、字符串操作 */
            //去除空格 type 1-所有空格  2-前后空格  3-前空格 4-后空格
            // trim('  1235asd', 1);
            //result：1235asd
            trim(str, type) {
                switch (type) {
                    case 1:
                        return str.replace(/\s+/g, "");
                    case 2:
                        return str.replace(/(^\s*)|(\s*$)/g, "");
                    case 3:
                        return str.replace(/(^\s*)/g, "");
                    case 4:
                        return str.replace(/(\s*$)/g, "");
                    default:
                        return str;
                }
            },


            /*type
            1:首字母大写
            2：首页母小写
            3：大小写转换
            4：全部大写
            5：全部小写
            * */
            // changeCase('hello', 1);
            //result  'Hello'
            changeCase(str, type) {
                function ToggleCase(str) {
                    let itemText = '';
                    str.split("").foreach(item => {
                        if (/^([a-z]+)/.test(item)) {
                            itemText += item.toUpperCase();
                        } else if (/^([A-Z]+)/.test(item)) {
                            itemText += item.toLowerCase();
                        } else {
                            itemText += item;
                        }
                    })
                    return itemText;
                }
                switch (type) {
                    case 1:
                        return str.replace(/\b\w+\b/g, function (word) {
                            return word.substring(0, 1).toUpperCase() + word.substring(1).toLowerCase();
                        });
                    case 2:
                        return str.replace(/\b\w+\b/g, function (word) {
                            return word.substring(0, 1).toLowerCase() + word.substring(1).toUpperCase();
                        });
                    case 3:
                        return ToggleCase(str);
                    case 4:
                        return str.toUpperCase();
                    case 5:
                        return str.toLowerCase();
                    default:
                        return str
                }
            },


            //字符串循环复制
            // console.log(repeatStr('abc',2))
            // result 'abcabc'
            repeatStr(str, count) {
                return str.repeat(count);
            },
            

            //字符串替换
            // console.log(replaceAll('这里是上海,中国第三大城市','上海','广州'));
            //result '这里是广州,中国第三大城市'
            replaceAll(str, priTxt, repTxt) {
                let raRegExp = new RegExp(priTxt, 'g');
                return str.replace(raRegExp, repTxt);
            },
            

            //字符替换,(默认替换为*)
            replaceStr(str, regArr, type = 0, ARepText = '*') {
                let regtext = '',
                    Reg = null,
                    replaceText = ARepText;
                //replaceStr('18819322663',[3,5,3],0)
                //result：188*****663
                if (regArr.length === 3 && type === 0) {
                    regtext = '(\\w{' + regArr[0] + '})\\w{' + regArr[1] + '}(\\w{' + regArr[2] + '})'
                    Reg = new RegExp(regtext);
                    let replaceCount = this.repeatStr(replaceText, regArr[1]);   //repeatStr是在上面定义过的（字符串循环复制）
                    return str.replace(Reg, '$1' + replaceCount + '$2')
                }
                //replaceStr('asdasdasdaa',[3,5,3],1)
                //result：***asdas***
                else if (regArr.length === 3 && type === 1) {
                    regtext = '\\w{' + regArr[0] + '}(\\w{' + regArr[1] + '})\\w{' + regArr[2] + '}'
                    Reg = new RegExp(regtext);
                    let replaceCount1 = this.repeatStr(replaceText, regArr[0]);
                    let replaceCount2 = this.repeatStr(replaceText, regArr[2]);
                    return str.replace(Reg, replaceCount1 + '$1' + replaceCount2)
                }
                //replaceStr('1asd88465asdwqe3',[5],0)
                //result：*****8465asdwqe3
                else if (regArr.length === 1 && type === 0) {
                    regtext = '(^\\w{' + regArr[0] + '})'
                    Reg = new RegExp(regtext);
                    let replaceCount = this.repeatStr(replaceText, regArr[0]);
                    return str.replace(Reg, replaceCount)
                }
                //replaceStr('1asd88465asdwqe3',[5],1,'+')
                //result："1asd88465as+++++"
                else if (regArr.length === 1 && type === 1) {
                    regtext = '(\\w{' + regArr[0] + '}$)'
                    Reg = new RegExp(regtext);
                    let replaceCount = this.repeatStr(replaceText, regArr[0]);
                    return str.replace(Reg, replaceCount)
                }
            },


            //检测字符串
            //checkType('165226226326','phone')
            //result：false
            checkType(str,type) {
                switch(type) {
                    case 'email':
                        return /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(str);
                    case 'phone':
                        return /^1[3][4][5][7][8][0-9]{9}$/.test(str);
                    case 'number':
                        return /^[0-9]$/.test(str);
                    case 'text':
                        return /^\w+$/.test(str);
                    case 'english':
                        return /^[a-zA-Z]+$/.test(str);
                    case 'lower':
                        return /^[a-z]+$/.test(str);
                    case 'upper':
                        return /^[A-Z]+$/.test(str);
                    default:
                        return true;
                }
            },
            

            //检测密码强度
            //checkPwd('12asdASAD')
            //result：3(强度等级为3)
            chechPwd(str) {
                let nowLv = 0;
                if(str.length < 6) {
                    return nowLv;
                }
                if(/[0-9]/.test(str)) {
                    nowLv++
                }
                if (/[a-z]/.test(str)) {
                    nowLv++
                }
                if (/[A-Z]/.test(str)) {
                    nowLv++
                }
                if (/[\.|-|_]/.test(str)) {
                    nowLv++
                }
                return nowLv;
            },
            

            //随机码
            //count取值范围2-36
            //randomWord(10)
            //result："2584316588472575"

            //randomWord(14)
            //result："9b405070dd00122640c192caab84537"

            //randomWord(36)
            //result："83vhdx10rmjkyb9"
            randomWord(count) {
                return Math.random().toString(count).substring(2);
            },


            //查找字符串
            // let strTest = 'sad44654blog5a1sd67as9dablog4s5d16zxc4sdweasjkblogwqepaskdkblogahseiuadbhjcibloguyeajzxkcabloguyiwezxc967';
            //countStr(strTest,'blog')
            //result：6
            countStr(str, strSplit) {
                return str.split(strSplit).length - 1
            },


            
            //过滤字符串(html标签，表情，特殊字符)
            //字符串，替换内容（special-特殊字符,html-html标签,emjoy-emjoy表情,word-小写字母，WORD-大写字母，number-数字,chinese-中文），要替换成什么，默认'',保留哪些特殊字符
            //如果需要过滤多种字符，type参数使用,分割，如下栗子
            //过滤字符串的html标签，大写字母，中文，特殊字符，全部替换成*,但是特殊字符'%'，'?'，除了这两个，其他特殊字符全部清除
            //let str='asd    654a大蠢sasdasdASDQWEXZC6d5#%^*^&*^%^&*$\\"\'#@!()*/-())_\'":"{}?<div></div><img src=""/>啊实打实大蠢猪自行车这些课程';
            // ecDo.filterStr(str,'html,WORD,chinese,special','*','%?')
            //result："asd    654a**sasdasd*********6d5#%^*^&*^%^&*$\"'#@!()*/-())_'":"{}?*****************"
            filterStr(str,type,restr='',spstr) {
                let typeArr = type.split(','),
                    _str = str;
                for (let i = 0, len = typeArr.length; i < len; i++) {
                    //是否是过滤特殊符号
                    let pattern;
                    if(typeArr[i] === 'special') {
                        let regText = '$()[]{}?\|^*+./\"\'+';
                        if(spstr){
                            let _spstr = spstr.split(""),
                                _regText = "[^0-9A-Za-z\\s";
                            for(let j=0, len1 = _spstr.length; j<len1; j++) {
                                if(regText.indexOf(_spstr[j]) === -1) {
                                    _regText += _spstr[j];
                                }
                                else {
                                    _regText += '\\' + _spstr[j];
                                }
                            }
                            _regText += ']';
                            pattern = new RegExp(_regText,'g');
                        }
                        else {
                            pattern = new RegExp("[^0-9A-Za-z\\s]","g");
                        }
                    }
                    switch (typeArr[i]) {
                        case 'special':
                            _str = _str.replace(pattern,restr);
                            break;
                        case 'html':
                            _str = _str.replace(/<\/?[^>]*>/g,restr);
                            break;
                        case 'emjoy': 
                            _str = _str.replace(/[^\u4e00-\u9fa5|\u0000-\u00ff|\u3002|\uFF1F|\uFF01|\uff0c|\u3001|\uff1b|\uff1a|\u3008-\u300f|\u2018|\u2019|\u201c|\u201d|\uff08|\uff09|\u2014|\u2026|\u2013|\uff0e]/g, restr);
                            break;
                        case 'word': 
                            _str = _str.replace(/[a-z]/g, restr);
                            break;
                        case 'WORD':
                            _str = _str.replace(/[A-Z]/g,restr);
                            break;
                        case 'number': 
                            _str = _str.replace(/[0-9]/g,restr);
                            break;
                        case 'chinese': 
                            _str = _str.replace(/[\u4E00-\u9FA5]/g,restr);
                            break;
                    }
                }
                return _str;
            }
            
        }
        console.log(ecDo.filterStr(str, 'html,WORD,chinese,special', '*', '%?'));
    </script>
</body>

</html>